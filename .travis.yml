#
# Copyright (c) 2016 Marat Abrarov (abrarov@gmail.com)
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
#

language: cpp
sudo: false

matrix:
  include:
    - env: COMPILER=g++-5 BUILD_TYPE=DEBUG
      compiler: gcc
      addons:
        - apt: &gcc5
          packages:
            - gcc-5
            - g++-5
          sources: &gcc5-sources
            - ubuntu-toolchain-r-test
        - apt: &cmake3
          packages:
            - cmake
            - cmake-data
          sources: &cmake3-sources
            - george-edison55-precise-backports
        - apt: &boost155
          packages:
            - libboost1.55-all-dev
          sources: &boost155-sources
            - boost-latest
#        apt: &qt5
#          packages:
#            - qtbase5-dev
#          sources: &qt5-sources
#            - ubuntu-sdk-team
    - env: COMPILER=g++-5 BUILD_TYPE=RELEASE
      compiler: gcc
      addons:
        apt: *gcc5
        apt: *cmake3
        apt: *boost155
#        apt: *qt5

script:
  - mkdir build
  - cd build
  - cmake -D CMAKE_CXX_COMPILER=$COMPILER -D CMAKE_BUILD_TYPE=$BUILD_TYPE -D ma_force_qt5=ON ..
  - cmake --build . --config $BUILD_TYPE --clean-first
  - ctest --build-config $BUILD_TYPE --verbose
